{% extends "base.html" %}

{% block content %}

<script>
    window.context.site = "{{ site.host }}";
    window.context.slug = "{{ site.slug }}";
</script>

<div class="row">

    <aside class="small-3 large-2 column">
        <a href="{% url 'site_add' %}">&plus; add a site</a>
        <ul class="side-nav">
        {% for s in sites %}
            <li><a href="{% url 'log' s.slug %}">{{ s.host }}</a></li>
        {% endfor %}
        </ul>
    </aside>

    <div class="small-9 large-10 column">

        {% if messages %}
            {% for message in messages %}
                <div data-alert class="alert-box {{ message.tags }}">
                    {{ message }}
                    <a href="#" class="close">&times;</a>
                </div> 
            {% endfor %}
        {% endif %}

        <h1 class="table">{{ site.host }}</h1>

        <div class="management">
            <a href="{% url 'site_remove' site.slug %}">&times; remove site</a>
            <button class="small log-clear">Clear Log</button>
        </div>

        <table class="log">
            <thead>
                <tr>
                    <th style="width: 30%">Source URL</th>
                    <th style="width: 36%">Destination URL</th>
                    <th style="width: 17%">404 first detected</th>
                    <th style="width: 17%">404 last detected</th>
                </tr>
            </thead>
        {% for entry in entries %}
            <tr>
                <td><a class="break-word" href="{{ entry.source_url }}" target="blank">{{ entry.source_url }}</a></td>
                <td><a class="break-word" href="{{ entry.destination_url }}" target="blank">{{ entry.destination_url }}</a></td>
                <td>{{ entry.time_first }}</td>
                <td>{{ entry.time_last }}</td>
            </tr>
        {% endfor %}
        </table>

    </div>

</div>

{% endblock %}
